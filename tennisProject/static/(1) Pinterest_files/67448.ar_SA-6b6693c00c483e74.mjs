(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[67448],{884798:(e,i,t)=>{t.d(i,{Z:()=>o});var n=t(376410);function o(e,i){const{alt_text:t,auto_alt_text:o}=e;return t?(0,n.nk)(i.bt("يتضمن هذا: {{ altText }}", "This contains: {{ altText }}", "web.altText", undefined, true),{altText:t}).join(""):o?(0,n.nk)(i.bt("قد يتضمن هذا: {{ autoAltText }}", "This may contain: {{ autoAltText }}", "web.altText", undefined, true),{autoAltText:o}).join(""):null}},537043:(e,i,t)=>{t.d(i,{Z:()=>v});var n=t(294184),o=t.n(n),r=t(883119),s=t(884798),a=t(499934),l=t(451681),d=t(434012),u=t(376410),c=t(16728),h=t(924065),p=t(785893);function m({alt:e,onError:i=(()=>{}),onLoad:t=(()=>{}),pin:n}){const{dominant_color:o,images:s={}}=n,{height:a,width:l,url:d}=function(e){var i;return"number"==typeof(null===(i=e["474x"])||void 0===i?void 0:i.width)&&"number"==typeof e["474x"].height&&e["474x"].width>e["474x"].height?e["736x"]:e["474x"]}(s)||{};return(0,p.jsx)(r.xu,{width:"100%",dangerouslySetInlineStyle:{__style:{zIndex:h.Z.storyPinImage}},children:(0,p.jsx)(r.Ee,{alt:e,color:o||"transparent",naturalHeight:null!=a?a:1,naturalWidth:null!=l?l:1,onError:i,onLoad:t,src:d||""})})}var g=t(117427);const v=({cropHeight:e,cropWidth:i,fallbackColor:t,highResOnly:n,imageFit:h,lowResOnly:v,mediumResOnly:x,onError:f,onLoad:_,pin:y,saved:b=!1})=>{var w,A,P;const T=(0,d.ZP)(),C=(0,a.Xx)(),{carousel_data:j,description:S="",dominant_color:V,grid_title:M,id:I,images:W,title:E}=y,D=(0,u.nk)(T.bt("يحتوي هذا على صورة لـ: {{ pinTitle }}", "This contains an image of: {{ pinTitle }}", "web.altText", undefined, true),{pinTitle:E||M}).join(""),O=(0,s.Z)(y,T)||S.trim().length>0&&S||D;if(j)return(0,p.jsx)(g.Z,{onError:f,onLoad:_,highResOnly:n,lowResOnly:v,pinId:I});let B,R="",H=0,k=0;if(W){var Z,L,$;let e=W["236x"];var z,F,U,N,G;if(n?e=W["736x"]||W.orig||W["474x"]||W["236x"]:x&&(e=W["474x"]||W.orig||W["236x"]),H=null===(Z=e)||void 0===Z?void 0:Z.height,k=null===(L=e)||void 0===L?void 0:L.width,R=null===($=e)||void 0===$?void 0:$.url,v||x||n)B=null!==(z=e)&&void 0!==z&&z.url?`${e.url} 1x`:"";else B=[(null===(F=W["236x"])||void 0===F?void 0:F.url)&&`${W["236x"].url} 1x`,(null===(U=W["474x"])||void 0===U?void 0:U.url)&&`${W["474x"].url} 2x`,(null===(N=W["736x"])||void 0===N?void 0:N.url)&&`${W["736x"].url} 3x`,(null===(G=W.orig)||void 0===G?void 0:G.url)&&`${W.orig.url} 4x`].filter(Boolean).join(", ")}return null!=C&&C.image&&(H=C.image.height,k=C.image.width,R=C.image.url),(0,p.jsx)(r.kC,{alignItems:"center",justifyContent:"start",minHeight:c.Ml,children:(0,p.jsx)(r.xu,{flex:"grow",children:(0,p.jsx)("div",{className:o()({savedGradient:b}),children:y.story_pin_data_id?(0,p.jsx)(m,{alt:O,pin:y,onError:f,onLoad:_}):(0,p.jsx)(r.xu,{height:i?e:void 0,width:i||void 0,"data-test-id":"non-story-pin-image",children:(0,p.jsx)(l.Z,{alt:O,color:"dominant"===t?V:t,fit:h,naturalHeight:null!==(w=H)&&void 0!==w?w:1,naturalWidth:null!==(A=k)&&void 0!==A?A:1,onError:f,onLoad:_,src:null!==(P=R)&&void 0!==P?P:"",srcSet:B})})})})})}},12198:(e,i,t)=>{t.d(i,{Z:()=>j});var n=t(667294),o=t(883119),r=t(537043),s=t(639429),a=t(175769),l=t(290588),d=t(855762),u=t(434012),c=t(785893);const h={__path:"M12 18.5A6.508 6.508 0 0 1 5.5 12c0-1.706.689-3.307 1.835-4.5H6.5a1 1 0 1 1 0-2h4.185v4.474a1 1 0 0 1-2 0V8.972A4.505 4.505 0 0 0 7.5 12c0 2.481 2.019 4.5 4.5 4.5s4.5-2.019 4.5-4.5a4.49 4.49 0 0 0-3.112-4.283 1 1 0 1 1 .615-1.902A6.482 6.482 0 0 1 18.5 12c0 3.584-2.916 6.5-6.5 6.5M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0"},p={__path:"M17.496 14.572a1 1 0 0 1-1 1h-.001a1.001 1.001 0 0 1-.999-1.001l.002-4.652-7.29 7.288a.995.995 0 0 1-.707.293.999.999 0 0 1-.707-1.707l7.293-7.29L9.428 8.5a1 1 0 0 1 .001-2h.001l8.071.005-.005 8.067zM12 0C5.373 0 0 5.373 0 12c0 6.628 5.373 12 12 12 6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12z"},m={overlay:{__style:{backgroundColor:"#000"}}};function g({backgroundImage:e,naturalHeight:i,naturalWidth:t,onRestartVideo:n,pinId:r}){const s=(0,u.ZP)();return(0,c.jsxs)(o.Ee,{alt:s.bt("صورة المنشور", "pin image", "image of a pin", undefined, true),naturalHeight:i,naturalWidth:t,src:e,children:[(0,c.jsx)(o.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.8,dangerouslySetInlineStyle:m.overlay}),(0,c.jsxs)(o.xu,{justifyContent:"center",direction:"column",display:"flex",position:"absolute",height:"100%",width:"100%","data-test-id":`video-end-card-${r}`,children:[(0,c.jsx)(o.iP,{rounding:2,children:(0,c.jsxs)(o.xu,{display:"flex",justifyContent:"center",padding:2,children:[(0,c.jsx)(o.JO,{accessibilityLabel:s.bt("زيارة موقع", "Visit site", "Button when pressed goes to pin's website", undefined, true),color:"light",dangerouslySetSvgPath:p,size:25}),(0,c.jsx)(o.xu,{margin:1}),(0,c.jsx)(o.xv,{color:"light",lineClamp:1,weight:"bold",children:s.bt("زيارة موقع", "Visit site", "Button when pressed goes to pin's website", undefined, true)})]})}),(0,c.jsx)(o.xu,{margin:3}),(0,c.jsx)(o.iP,{onTap:n,rounding:2,children:(0,c.jsxs)(o.xu,{display:"flex",justifyContent:"center",padding:2,children:[(0,c.jsx)(o.JO,{accessibilityLabel:s.bt("شاهد مرة أخرى", "Watch again", "Button when pressed restarts the video", undefined, true),color:"light",dangerouslySetSvgPath:h,size:25}),(0,c.jsx)(o.xu,{margin:1}),(0,c.jsx)(o.xv,{color:"light",lineClamp:1,weight:"bold",children:s.bt("شاهد مرة أخرى", "Watch again", "Button when pressed restarts the video", undefined, true)})]})})]})]})}function v({aspectRatio:e,children:i}){return(0,c.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{aspectRatio:e}},children:i})}var x=t(198354);const f=new Set(["ConversationView","TodayTabFeed"]);function _({inAdsDesktopVideoExperiment:e,isAutoplay:i,cropHeight:t,currentTime:u,lowResOnly:h,highResOnly:p,onLoad:m,onError:_,saved:y,onTimeChange:b,isExperimentalPinRep:w,pin:A,surface:P,playing:T,rootMargin:C,viewType:j,viewParameter:S,onVisibilityChanged:V,trackFullVisible:M,inVisibilityChangedHookExperiment:I,imageHeightModifier:W,cropWidth:E}){var D,O;const[B,R]=(0,n.useState)(!1),[H,k]=(0,n.useState)(!0),{is_downstream_promotion:Z,promoter:L}=A,$=(0,s.jL)(Z,!!L),z=$&&!A.is_eligible_for_web_closeup,F=w&&$&&A.is_eligible_for_web_closeup&&!f.has(P),{setCurrentVideo:U}=(0,l.I)(),N=z||!w||!$,G=(0,a.Z)({onVisibilityChanged:V,inAdsDesktopVideoExperiment:e,trackFullVisible:M,rootMargin:C});let q=!T;e&&(q=H,i&&T&&H&&k(!1));const{url:X}=(null===(D=A.images)||void 0===D?void 0:D["236x"])||{},{id:J,is_promoted:K}=A,Q=(0,n.useCallback)((({event:e})=>{e.preventDefault(),e.stopPropagation(),U({pinId:J,isPromoted:Boolean(K),currentTime:0}),R(!1)}),[K,J,U]),Y=(0,n.useCallback)((()=>{K&&R(F)}),[F,K]);if(!A.videos||null===(O=A.videos.video_list)||void 0===O||!O.V_HLSV4)return null;const{height:ee,thumbnail:ie,width:te,url:ne}=A.videos.video_list.V_HLSV4||{},oe=A.videos.id,re=[{type:"video/m3u8",src:ne}];let se,ae=(null!=te?te:1)/(null!=ee?ee:1);const le=e&&P&&(0,d.Z)(P);if(le&&(ae=1,se="transparent",W&&(ae-=W-1)),B&&$)return(0,c.jsx)(o.xu,{ref:I?G:null,children:(0,c.jsx)(g,{backgroundImage:null!=X?X:"",naturalHeight:null!=ee?ee:1,naturalWidth:null!=te?te:1,pinId:A.id,onRestartVideo:Q})});if(q){let e={highResOnly:p,lowResOnly:h,onError:_,onLoad:m,pin:A,saved:y};return le&&(e={...e,cropHeight:t,cropWidth:E,imageFit:"contain"}),(0,c.jsx)(o.xu,{ref:I?G:null,children:(0,c.jsx)(v,{aspectRatio:ae,children:(0,c.jsx)(r.Z,{...e})})})}return(0,c.jsx)(o.xu,{ref:I?G:null,children:(0,c.jsx)(x.ZP,{isAutoPlay:!!i,cropHeight:t,rootMargin:C,surface:P,inAdsDesktopVideoExperiment:e,contextLogData:{viewParameter:S,component:0,objectId:A.id,video_id:oe,view:j},aspectRatio:ae,backgroundColor:se,captions:"",hlsConfig:{capLevelToPlayerSize:!0,startPosition:u||-1},loop:N,onTimeChange:b,playing:T,onPlay:()=>{},onPlayError:()=>{},poster:X||ie,src:null!=re?re:[],videoStartTime:u,volume:0,onEnded:Y})})}var y=t(260531),b=t(14510);var w=t(484877),A=t(340592);function P(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}const T=(0,b.Z)(_);class C extends n.Component{constructor(...e){super(...e),P(this,"calculateCurrentVideoTime",(()=>{const{currentTimeFromPinRep:e,pin:i,videosAutoplaying:t}=this.props,{id:n}=i,o=(0,w.Z)(n,t);return this.currentVideoCurrentTime||o||e})),P(this,"handleVisibilityChanged",(e=>{const{currentTimeFromPinRep:i,pin:t,requestContext:n,setCurrentVideo:o,pauseAutoplay:r,videosAutoplaying:s}=this.props,{id:a,is_promoted:l}=t,d=(0,A.Z)(a,s),u=function(e,i){const{organicVideosAutoplaying:t,promotedVideosAutoplaying:n}=i,o={...t,...n};for(const r in o){const{paused:i}=o[r];if(r!==e&&!i)return!1}return!0}(a,s);if(e){if(l)o({pinId:a,isPromoted:l,currentTime:this.calculateCurrentVideoTime()});else if(u){const{anyEnabled:e}=n.experimentsClient.checkExperiment("hfp_web_video_autoplay_in_grid")||{};o({pinId:a,isPromoted:Boolean(l),currentTime:this.calculateCurrentVideoTime(),inVideoGridAutoplayExp:e})}}else!e&&d&&r({pinId:a,isPromoted:Boolean(l),currentTime:i||this.currentVideoCurrentTime})})),P(this,"handleVideoTimeChange",(e=>{const{pin:i,onTimeChange:t,videosAutoplaying:n}=this.props,{id:o}=i;(0,A.Z)(o,n)&&(this.currentVideoCurrentTime=e.time),t&&t(e)}))}componentDidMount(){this.props.onLoad&&this.props.onLoad()}componentDidUpdate(e){const{appInFocus:i}=e,{appInFocus:t,currentTimeFromPinRep:n,pauseAutoplay:o,pin:r,setCurrentVideo:s,videosAutoplaying:a}=this.props,{id:l,is_promoted:d}=r,u=(0,A.Z)(l,a);t!==i&&!t&&u?(this.pausedDueToBrowserOutOfFocus=!0,o({pinId:l,isPromoted:Boolean(d),currentTime:n||this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&t&&(this.pausedDueToBrowserOutOfFocus=!1,s({pinId:l,isPromoted:Boolean(d),currentTime:this.calculateCurrentVideoTime()}))}componentWillUnmount(){const{currentTimeFromPinRep:e,pauseAutoplay:i,pin:t,videosAutoplaying:n}=this.props,{id:o,is_promoted:r}=t;(0,A.Z)(o,n)&&i({pinId:o,isPromoted:Boolean(r),currentTime:e||this.currentVideoCurrentTime})}render(){const{cropHeight:e,isAutoplay:i,pin:t,surface:n,videosAutoplaying:o,viewParameter:r,viewType:s,highResOnly:a,lowResOnly:l,onError:d,onLoad:u,saved:h,inAdsDesktopVideoExperiment:p,isExperimentalPinRep:m,rootMargin:g,cropWidth:v,imageHeightModifier:x}=this.props,{id:f}=t,_=(0,w.Z)(f,o),y=(0,A.Z)(f,o)&&i;return(0,c.jsx)(T,{cropHeight:e,rootMargin:g,currentTime:_,inAdsDesktopVideoExperiment:p,isAutoplay:i,viewParameter:r,viewType:s,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,pin:t,surface:n,playing:y,trackFullVisible:!1,highResOnly:a,lowResOnly:l,onError:d,onLoad:u,saved:h,isExperimentalPinRep:m,cropWidth:v,imageHeightModifier:x})}}function j(e){const{appUI:{appInFocus:i,isAutoplay:t,videosAutoplaying:n},pauseAutoplay:o,setCurrentVideo:r}=(0,l.I)();return(0,c.jsx)(C,{...e,appInFocus:i,isAutoplay:t,pauseAutoplay:o,requestContext:(0,y.B)(),setCurrentVideo:r,videosAutoplaying:n})}},499934:(e,i,t)=>{t.d(i,{wH:()=>g,wA:()=>p,Xx:()=>v});var n=t(667294),o=t(200371),r=t(70582);const s=({dimensionName:e,variants:i,selectedTuple:t,variantStatuses:n})=>{const o=t.filter((([i])=>i!==e));for(const{dimensions:r={},offer_summary:s={}}of i){if(!o.every((([e,i])=>r[e]===i)))continue;const i=n.find((({value:i})=>i===r[e]));i&&(i.status=s.in_stock||"available"===i.status?"available":"outOfStock")}},a=({variants:e,selectedMap:i={},variantMap:t})=>{const n=Object.entries(i);for(const o in t){const i=t[o];i&&s({dimensionName:o,variants:e,selectedTuple:n,variantStatuses:i})}},l=e=>{var i;const t={...(null===(i=e.find((e=>!!e.is_preselected)))||void 0===i?void 0:i.dimensions)||{}};for(const n in t)t[n]||delete t[n];return t},d=({selectedMap:e,variants:i})=>i.filter((({dimensions:i={}})=>{for(const t in e){const n=e[t];if(i[t]!==n)return!1}return!0}));var u=t(545168),c=t(785893);const h=(0,n.createContext)(undefined),p=e=>{var i;if(!e.variants)return!1;const t=null===(i=e.dimension_metadata)||void 0===i?void 0:i.find((e=>{var i;return"color"===(null===(i=e.name)||void 0===i?void 0:i.toLowerCase())}));return!!(t&&t.name&&t.values&&1!==t.values.length)},m=({pinId:e,children:i,dimensionMetadata:t,primaryDimName:s,variants:p,primaryDimensionThumbnailImages:m})=>{const g=(0,n.useCallback)((({selectedMap:e})=>{const i=(({defaultStatus:e="available",dimensionMetadataNameValues:i,primaryDimName:t,primaryDimensionThumbnailImages:n})=>i.reduce(((i,{values:o,name:s})=>s&&o?{...i,[s]:o.map(((i,o)=>{const a={status:e,value:i};if(s===t){const e=null==n?void 0:n[o.toString()];if(e)return{...a,image:(0,r.Z)({images:e.canonical_images})}}return a}))}:i),{}))({dimensionMetadataNameValues:t.map((({name:e,values:i})=>({name:e,values:i}))),primaryDimName:s,primaryDimensionThumbnailImages:m,defaultStatus:"invalid"});return a({variantMap:i,selectedMap:e,variants:p}),i}),[t,s,m,p]),{logContextEvent:v}=(0,u.v)(),x=p.find((e=>e.is_preselected)),f=(0,o.a)(),{pinsState:_,setPinState:y}=f||{},b=_&&_[e],w=b?b.selectedMap:l(p),A=b?b.selectedVariants:d({selectedMap:w,variants:p}),P=b?b.variantMap:g({selectedMap:w}),T=!!b&&b.isSelectedByUser,C=b?b.variantUrl:(null==x?void 0:x.pin_id)||e,j=(0,n.useCallback)(((i,t=!1)=>{const n=d({selectedMap:i,variants:p}),o={selectedMap:i,selectedVariants:n,variantMap:g({selectedMap:i}),isSelectedByUser:t,variantUrl:""},r=n[0].pin_id;r&&(o.variantUrl=r),y&&y(e,o)}),[g,e,y,p]),S=(0,n.useCallback)((()=>{const e=l(p);j(e)}),[j,p]),V=(0,n.useCallback)((({dimensionName:e,variant:i,isAutoSelection:t=!1})=>{var n;const o=null===(n=P[e])||void 0===n?void 0:n.find((({value:e})=>e===i));try{if(!o)throw new Error(`Unable to find the selected variant ${e}: ${i}`);if(w[e]===i)return;const n={..."invalid"!==o.status?w:{},[e]:i},r=(({status:e,variantMap:i})=>{const t={};for(const o in i){var n;t[o]=null===(n=i[o])||void 0===n?void 0:n.map((i=>({...i,status:e})))}return t})({variantMap:P,status:"invalid"});a({variantMap:r,selectedMap:n,variants:p}),j(n,!t),v({event_type:10240,component:14092})}catch(r){throw S(),r}}),[P,w,p,j,S,v]),{title:M}=A[0],I=(0,r.Z)({images:(A[0].additional_images||[])[0].canonical_images}),W=(e=>{let i,t,n,o,r=!1;const{percentage_off:s,standard_price:a}=1===e.length&&e[0].offer_summary||{};for(const l of e){const{max_price:e,max_price_val:s,min_price:a,min_price_val:d,price:u,price_val:c,price_in_micro_currency:h,in_stock:p}=l.offer_summary||{},m=c||Number(h);"number"==typeof d&&Number.isFinite(d)&&"number"==typeof s&&Number.isFinite(s)&&((void 0===t||d<t)&&(t=d,i=a),(void 0===o||s>o)&&(o=s,n=e),r=r||!!p),Number.isFinite(m)&&((null==t||m<t)&&(t=m,i=u),(null==o||m>o)&&(o=m,n=u),r=r||!!p)}if(n&&i)return i===n?{in_stock:r,percentage_off:s,price:i,standard_price:a}:{in_stock:r,max_price:n,min_price:i,percentage_off:s,price:i,standard_price:a}})(A),E=(0,n.useMemo)((()=>{const e=((null==x?void 0:x.dimensions)||{})[s],i=P[s]||[];let n=i;if(e&&i){const t=i.find((i=>i.value===e));t&&(n=[t,...i.filter((i=>i.value!==e))])}return{dimensionMetadataNameValues:t.map((({name:e,values:i})=>({name:e,values:i}))),offerSummary:W,primaryVariants:n,primaryDimName:s,selectedMap:w,isSelectedByUser:T,selectVariant:V,title:M,variants:p,image:I,variantUrl:C}}),[x,s,P,t,W,w,T,V,M,p,I,C]);return(0,c.jsx)(h.Provider,{"data-test-id":"safe-product-pins-feed-context-provider",value:E,children:i})},g=({children:e,variantSet:i,pinId:t,isEligible:n})=>{if(!n)return(0,c.jsx)(h.Provider,{"data-test-id":"undefined-context-provider",value:void 0,children:e});const{dimension_metadata:o,primary_dimension_thumbnail_images:r,variants:s}=i||{},a=null==o?void 0:o.find((e=>{var i;return"color"===(null===(i=e.name)||void 0===i?void 0:i.toLowerCase())}));return(0,c.jsx)(m,{pinId:t,dimensionMetadata:o||[],primaryDimName:(null==a?void 0:a.name)||"",primaryDimensionThumbnailImages:r,variants:s||[],children:e})},v=()=>(0,n.useContext)(h)},200371:(e,i,t)=>{t.d(i,{A:()=>s,a:()=>a});var n=t(667294),o=t(785893);const r=(0,n.createContext)(void 0),s=({children:e})=>{const[i,t]=(0,n.useState)({}),s=(0,n.useMemo)((()=>({setPinState:(e,n)=>{t({...i,[e]:{...i[e]||{},...n}})},pinsState:i})),[i]);return(0,o.jsx)(r.Provider,{value:s,children:e})},a=()=>(0,n.useContext)(r)},16728:(e,i,t)=>{t.d(i,{Dv:()=>r,Ml:()=>s,Oc:()=>n,mv:()=>o});const n=16,o=4,r={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"},s=120},882345:(e,i,t)=>{t.d(i,{Z:()=>r});var n=t(977660),o=t(137465);function r({carouselData:e,images:i,richMetadata:t,richSummary:r,shouldUnifyImageSizes:s}){const a=(0,o.Z)({richPinData:t||r});return a&&a.additional_images&&a.additional_images.length>0?(0,n.Z)(i,a.additional_images,e&&e.index,s,a.id):e||void 0}},554392:(e,i,t)=>{function n(e,i=!1){if(!e)return null;if(i){if(e["736x"]&&e["736x"].url)return e["736x"];if(e["564x"]&&e["564x"].url)return e["564x"]}else{if(e["564x"]&&e["564x"].url)return e["564x"];if(e["736x"]&&e["736x"].url)return e["736x"]}return e["474x"]&&e["474x"].url?e["474x"]:e["236x"]&&e["236x"].url?e["236x"]:null}t.d(i,{Z:()=>n})},70582:(e,i,t)=>{t.d(i,{Z:()=>o});const n=["564x","736x","orig","474x","236x"],o=({images:e={},resolutionPreferences:i=n})=>{for(const t of i)if(e[t]&&e[t].url)return e[t];return null}},744589:(e,i,t)=>{t.d(i,{X:()=>n});const n="favorited"},137465:(e,i,t)=>{function n({richPinData:e={}}){var i;return null==e||null===(i=e.products)||void 0===i?void 0:i[0]}t.d(i,{Z:()=>n})},14510:(e,i,t)=>{t.d(i,{Z:()=>u});var n=t(667294),o=t(973935),r=t(785893);function s(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}const a=new Map;let l=null;const d=e=>{e.forEach((e=>{const i=a.get(e.target);i&&i(e)}))},u=e=>{class i extends n.Component{constructor(...e){super(...e),s(this,"seen",!1),s(this,"enter",(e=>{const i=e.intersectionRatio>0||e.isIntersecting;this.seen=i,this.seen&&this.props.onVisibilityChanged(!0)})),s(this,"leave",(()=>{const e=this._node;e&&(e=>a.has(e))(e)&&this.seen&&(this.props.onVisibilityChanged(!1),this.seen=!1)})),s(this,"observe",(e=>{try{this._node=o.findDOMNode(this)}catch(n){return}if(!this._node)return;const{inAdsDesktopVideoExperiment:i}=this.props,t=this._node;((e,i="-64px 0px 0px 0px",t)=>{const n={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:i,threshold:[0,.5,1]};l=l||new window.IntersectionObserver(d,n),a.set(e,t),l.observe(e)})(t,e,(e=>{if(!a.has(t))return;const n=i?e.intersectionRatio>=.5:e.intersectionRatio>0||e.isIntersecting,o=this.props.trackFullVisible?e.intersectionRatio>=1:n,r=this.props.trackFullVisible?0===e.intersectionRatio:!o;!this.seen&&o?this.enter(e):this.seen&&r&&this.leave()}))}))}componentDidMount(){const{rootMargin:e}=this.props;this.observe(e)}componentWillUnmount(){const e=this._node;e&&(this.leave(),(e=>{l.unobserve(e),a.delete(e)})(e))}render(){return(0,r.jsx)(e,{...this.props})}}return s(i,"displayName",`DeprecatedWithVisibilityChanged(${e.displayName||e.name})`),i}},175769:(e,i,t)=>{t.d(i,{Z:()=>u});var n=t(667294);const o=new Map;let r=null;const s=e=>{e.forEach((e=>{const i=o.get(e.target);i&&i(e)}))},a=e=>{r.unobserve(e),o.delete(e)},l=(e,i="-64px 0px 0px 0px",t)=>{const n={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:i,threshold:[0,.5,1]};r=r||new window.IntersectionObserver(s,n),o.set(e,t),r.observe(e)},d=e=>o.has(e);function u({onVisibilityChanged:e,inAdsDesktopVideoExperiment:i,trackFullVisible:t,rootMargin:r}){const s=(0,n.useRef)(null);let u=!1;const c=()=>{s.current instanceof HTMLElement&&d(s.current)&&u&&(e(!1),u=!1)},h=(0,n.useCallback)((n=>{s.current instanceof HTMLElement&&l(s.current,n,(n=>{if(!o.has(s.current))return;const r=i?n.intersectionRatio>=.5:n.intersectionRatio>0||n.isIntersecting,a=t?n.intersectionRatio>=1:r,l=t?0===n.intersectionRatio:!a;!u&&a?(i=>{const t=i.intersectionRatio>0||i.isIntersecting;u=t,u&&e(!0)})(n):u&&l&&c()}))}),[s.current]);return(0,n.useEffect)((()=>(h(r),()=>{s.current instanceof HTMLElement&&(c(),a(s.current))})),[h]),s}},484877:(e,i,t)=>{function n(e,i){const{organicVideosAutoplaying:t,promotedVideosAutoplaying:n}=i,o={...t,...n};return o[e]&&o[e].currentTime}t.d(i,{Z:()=>n})},340592:(e,i,t)=>{function n(e,i){const{organicVideosAutoplaying:t,promotedVideosAutoplaying:n}=i,o={...t,...n};return!!o[e]&&!o[e].paused}t.d(i,{Z:()=>n})},855762:(e,i,t)=>{t.d(i,{Z:()=>o});var n=t(977362);function o(e){return n.zI.includes(e)}},924065:(e,i,t)=>{t.d(i,{Z:()=>n});const n={debugPinImpressions:999,max:9999,pinActionWrapper:101,saved:102,storyPinImage:-1}},117427:(e,i,t)=>{t.d(i,{Z:()=>v});var n=t(667294),o=t(883119),r=t(882345),s=t(554392),a=t(842625),l=t(434012),d=t(691014),u=t(16728),c=t(160897),h=t(836153),p=t(785893);function m(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}class g extends n.Component{constructor(...e){super(...e),m(this,"state",{showBadge:!0}),m(this,"renderBadge",(()=>{const{carouselData:e,isCloseup:i,showCarouselBadge:t}=this.props;if(!e)return null;const{showBadge:n}=this.state,{carousel_slots:r,index:s}=e,a=n?.8:0;return!i&&t?(0,p.jsx)(o.xu,{alignItems:"center",color:"selected",display:"flex",height:35,justifyContent:"center",marginEnd:5,marginTop:5,position:"absolute",right:!0,rounding:2,width:35,zIndex:new o.Ry(1),dangerouslySetInlineStyle:{__style:{opacity:a,transition:"opacity .3s"}},children:(0,p.jsx)(o.xv,{color:"inverse",children:`${(null!=s?s:0)+1}/${(null!=r?r:[]).length}`})}):null}))}componentDidMount(){this.hideBadgeTimeout=setTimeout((()=>this.setState({showBadge:!1})),3e3)}componentDidUpdate(e){const{showBadge:i}=this.state,{carouselData:t}=e,{carouselData:n}=this.props;if(!t||!n)return;const{index:o}=t,{index:r}=n;i&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.hideBadgeTimeout=setTimeout((()=>this.setState({showBadge:!1})),3e3)),o!==r&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.setState({showBadge:!0}))}componentWillUnmount(){this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout)}render(){const{isCloseup:e,carouselIndex:i,closeupHeight:t,closeupWidth:n=0,widthRatio:r=1,cropHeight:l,cropWidth:h,carouselData:m,disableTransition:g,highResOnly:v,lowResOnly:x,onError:f,onLoad:_,pinId:y,isEditMode:b,isDenseView:w,pin:A}=this.props;if(!m)return null;if(r>1||r<0)throw new Error("widthRatio should be between 0 and 1 inclusive");const{carousel_slots:P=[],index:T=0}=m,C=void 0!==i?i:T,j=!e&&h,{images:S}=P[C];let V;V=e?n:j||(v?474:w?a.Lo:a.yF);const M=Math.floor(V*r),I=(null==S?void 0:S["236x"])||{},W=l||I.height||0,E=h||I.width||236,D=t||W/E*M,O=(e=>{const i=e.reduce(((e,i)=>{var t;const{images:n}=i,{height:o=1,width:r=1}=(null==n?void 0:n["736x"])||(null==n?void 0:n["236x"])||{},s=`${r}x${o}`,a=(null===(t=e[s])||void 0===t?void 0:t.times)||0;return{...e,[s]:{imageHeight:o,imageWidth:r,times:a+1}}}),{}),t=Object.keys(i).reduce(((e,t)=>i[t].times>e.times?i[t]:e),{times:-1,imageHeight:-1,imageWidth:-1});return Object.keys(i).length>1?{imageHeight:t.imageHeight,imageWidth:t.imageWidth}:null})(P);return(0,p.jsxs)(o.xu,{height:D,display:"flex",alignItems:"center",overflow:"hidden","data-test-id":"carousel-pin",minHeight:u.Ml,"data-test-image-signature":null==A?void 0:A.image_signature,children:[!b&&this.renderBadge(),(0,p.jsx)(d.Z,{carouselData:m,trackCarousel:!0,impressionType:"Pin",loggingId:y,slotIndex:T,viewParameter:72,viewType:1,children:(0,p.jsx)(o.xu,{position:"absolute",height:D,width:M,overflow:"hidden"})},`carousel-impression-key-${C}`),(0,p.jsx)(o.xu,{width:M*P.length,dangerouslySetInlineStyle:{__style:{transition:g?"":"left .3s",left:(0,c.vF)(P.length,M,V,C)}},left:!0,height:"100%",display:"flex",direction:"row",position:"relative",children:P.map(((i,t)=>{if(e){const e=t===P.length-1;return(({pinId:e,slot:i,slotIndex:t,onError:n,onLoad:r,widthToUse:a,gap:l},d)=>{const{url:u,width:h,height:m}=(0,s.Z)(i.images)||{},{details:g=""}=i,v=(0,c.GH)(g,d,t);return(0,p.jsx)(o.xu,{"data-test-id":"carousel-slot-container",width:a,height:"100%",marginEnd:l,children:(0,p.jsx)(o.zd,{height:"100%",wash:!0,children:(0,p.jsx)(o.Ee,{alt:v,fit:"contain",naturalHeight:null!=m?m:1,naturalWidth:null!=h?h:1,onError:n,onLoad:r,src:null!=u?u:""})})},`carousel-slot-${e}-${t}`)})({pinId:y,slot:i,slotIndex:t,onError:f,onLoad:_,widthToUse:M,gap:M<V&&!e?1:0},this.props.i18n)}return((e,i,t,n,r,s,a,l,d,u,h,m,g,v,x)=>{var f,_,y;const{images:b,details:w=""}=i;let A,P=236,T=236,C="";var j,S,V,M,I,W,E,D;if(r?(P=474,T=b&&Math.min(P/.8,P/((null!==(j=null===(S=b["564x"])||void 0===S?void 0:S.width)&&void 0!==j?j:1)/(null!==(V=null===(M=b["564x"])||void 0===M?void 0:M.height)&&void 0!==V?V:1))),C=b&&(null===(I=b["564x"])||void 0===I?void 0:I.url)):b&&b["736x"]?(T=b&&b["736x"]&&b["736x"].height,P=b&&b["736x"]&&b["736x"].width,C=b&&b["736x"]&&b["736x"].url):b&&b["236x"]&&(T=b&&b["236x"]&&b["236x"].height,P=b&&b["236x"]&&b["236x"].width,C=b&&b["236x"]&&b["236x"].url),g&&v&&(T=Math.min(g*v,null!==(W=T)&&void 0!==W?W:1)),s)A=`${null!==(E=null==b||null===(D=b["236x"])||void 0===D?void 0:D.url)&&void 0!==E?E:""} 1x`;else if(r){var O,B;A=`${null!==(O=null==b||null===(B=b["564x"])||void 0===B?void 0:B.url)&&void 0!==O?O:""} 1x`}else{var R,H,k;A=[(null==b?void 0:b["474x"])&&`${null!==(R=b["474x"].url)&&void 0!==R?R:""} 2x`,(null==b?void 0:b["736x"])&&`${null!==(H=b["736x"].url)&&void 0!==H?H:""} 3x`,(null==b?void 0:b.orig)&&`${null!==(k=b.orig.url)&&void 0!==k?k:""} 4x`].filter(Boolean).join(", ")}const Z=(0,c.GH)(w,e,n),L=m?void 0:T,$=m?void 0:P,z=!!x,{boxHeight:F,boxWidth:U}=z?{boxHeight:null==x?void 0:x.imageHeight,boxWidth:null==x?void 0:x.imageWidth}:{boxHeight:L,boxWidth:$};return(0,p.jsx)(o.xu,{"data-test-id":"carousel-slot-container",height:F,width:U,children:(0,p.jsx)(o.xu,{height:m?h:void 0,width:m||void 0,"data-test-id":`carousel-img-${n}`,children:(0,p.jsx)(o.Ee,{alt:Z,fit:m?"cover":"none",naturalHeight:null!==(f=T)&&void 0!==f?f:1,naturalWidth:null!==(_=P)&&void 0!==_?_:1,onError:a,onLoad:l,src:null!==(y=C)&&void 0!==y?y:"",srcSet:A})})},`carousel-slot-${t}-${n}`)})(this.props.i18n,i,y,t,v,x,f,_,0,0,l,h,D,M,O)}))})]})}}function v(e){const i=(0,l.ZP)(),t=(0,h.S6)()(e.pinId)||e.pin,n=(0,r.Z)({carouselData:null==t?void 0:t.carousel_data,images:null==t?void 0:t.images,richMetadata:null==t?void 0:t.rich_metadata,richSummary:null==t?void 0:t.rich_summary,shouldUnifyImageSizes:!0});return(0,p.jsx)(g,{...e,carouselData:n,i18n:i})}m(g,"defaultProps",{showCarouselBadge:!0})},160897:(e,i,t)=>{t.d(i,{CU:()=>r,GH:()=>l,Iw:()=>a,gA:()=>d,tD:()=>s,vF:()=>u});const n=({containerWidth:e,contentWidth:i,index:t,slotAndGapWidth:o})=>{const r=t-1,s=r*o;return i-s>=e?s:n({index:r,slotAndGapWidth:o,containerWidth:e,contentWidth:i})},o=({containerWidth:e,contentWidth:i,gap:t,index:o,slidesShownPerPosition:r,slotAndGapWidth:s})=>{const a=n({containerWidth:e,contentWidth:i,index:o,slotAndGapWidth:s}),l=(({slidesShownPerPosition:e,slotAndGapWidth:i})=>i-(e-parseInt(e,10))*i)({slidesShownPerPosition:r,slotAndGapWidth:s});return a+l-t},r=({containerWidth:e,gap:i,index:t,numberOfSlides:n,slotWidth:r})=>{const s=r+i,a=s*n;if(a<=e)return 0;const l=e/s,d=(({index:e,numberOfSlides:i,slidesShownPerPosition:t})=>i-e-Math.floor(t)<1)({index:t,numberOfSlides:n,slidesShownPerPosition:l}),u=d?o({containerWidth:e,contentWidth:a,gap:i,index:t,slidesShownPerPosition:l,slotAndGapWidth:s}):t*s;return u?Math.round(-u):0},s=({containerWidth:e,gap:i,index:t,numberOfSlides:n,slotWidth:o})=>{const s=(o+i)*n;if(s<=e||0===e)return!0;const a=r({containerWidth:e,gap:i,index:t,numberOfSlides:n,slotWidth:o}),l=s-e;return Math.abs(a)+i>=l},a=({containerWidth:e,currentIndex:i,gap:t,index:n,numberOfSlides:o,slotWidth:s})=>{const a=s+t;if(a*o<=e||0===e)return!0;return r({containerWidth:e,gap:t,index:i,numberOfSlides:o,slotWidth:s})+a*n<e+a},l=(e,i,t)=>e||`${i.bt("صورة منشور العرض الدوار", "carousel image", "Alternate text for a carousel image that indicates it is a carousel pin, with carousel index followed", undefined, true)} ${t}`,d=({highResOnly:e,lowResOnly:i,slot:t})=>{var n,o,r;const{images:s}=t;var a,l,d,u;return i?`${null!==(a=null==s||null===(l=s["236x"])||void 0===l?void 0:l.url)&&void 0!==a?a:""} 1x`:e?`${null!==(d=null==s||null===(u=s["564x"])||void 0===u?void 0:u.url)&&void 0!==d?d:""} 1x`:[(null==s?void 0:s["474x"])&&`${null!==(n=s["474x"].url)&&void 0!==n?n:""} 2x`,(null==s?void 0:s["736x"])&&`${null!==(o=s["736x"].url)&&void 0!==o?o:""} 3x`,(null==s?void 0:s.orig)&&`${null!==(r=s.orig.url)&&void 0!==r?r:""} 4x`].filter(Boolean).join(", ")},u=(e,i,t,n,o=0)=>{if(t===i)return n*i*-1;const r=Math.floor(t-i),s=i+o;return n===e-1?-1*n*s+r:-1*n*s}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/67448.ar_SA-6b6693c00c483e74.mjs.map